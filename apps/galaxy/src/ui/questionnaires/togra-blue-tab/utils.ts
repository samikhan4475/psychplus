import { ANSWERS } from './constants'
import { SchemaType } from './schema'
import { ScoreType } from './types'

const calculateTotalScore = (data: SchemaType): ScoreType => {
  let correct = 0
  let incorrect = 0

  Object.keys(ANSWERS).forEach((key) => {
    const expected = ANSWERS[key as keyof typeof ANSWERS]
    const actual = data[key as keyof SchemaType]

    if (!actual) return
    if (expected === actual) {
      correct++
    } else {
      incorrect++
    }
  })

  return {
    total: correct + incorrect,
    correct,
    incorrect,
  }
}

type AgeGroup = '21-29' | '30-39' | '40-49' | '50-54' | '55-59' | '60-64'

interface TograRow {
  rawScore: number
  standardScore: number
  confidenceInterval: [number, number]
}

const TOGRA_TABLES: Record<AgeGroup, TograRow[]> = {
  '21-29': [
    { rawScore: 0, standardScore: 29, confidenceInterval: [27, 41] },
    { rawScore: 1, standardScore: 31, confidenceInterval: [29, 43] },
    { rawScore: 2, standardScore: 33, confidenceInterval: [31, 44] },
    { rawScore: 3, standardScore: 34, confidenceInterval: [32, 45] },
    { rawScore: 4, standardScore: 36, confidenceInterval: [34, 47] },
    { rawScore: 5, standardScore: 38, confidenceInterval: [36, 49] },
    { rawScore: 6, standardScore: 40, confidenceInterval: [38, 51] },
    { rawScore: 7, standardScore: 42, confidenceInterval: [40, 53] },
    { rawScore: 8, standardScore: 43, confidenceInterval: [41, 54] },
    { rawScore: 9, standardScore: 45, confidenceInterval: [43, 55] },
    { rawScore: 10, standardScore: 47, confidenceInterval: [45, 57] },
    { rawScore: 11, standardScore: 49, confidenceInterval: [47, 59] },
    { rawScore: 12, standardScore: 51, confidenceInterval: [49, 61] },
    { rawScore: 13, standardScore: 52, confidenceInterval: [50, 62] },
    { rawScore: 14, standardScore: 54, confidenceInterval: [52, 64] },
    { rawScore: 15, standardScore: 56, confidenceInterval: [54, 66] },
    { rawScore: 16, standardScore: 58, confidenceInterval: [55, 67] },
    { rawScore: 17, standardScore: 60, confidenceInterval: [57, 69] },
    { rawScore: 18, standardScore: 61, confidenceInterval: [58, 70] },
    { rawScore: 19, standardScore: 63, confidenceInterval: [60, 72] },
    { rawScore: 20, standardScore: 65, confidenceInterval: [62, 74] },
    { rawScore: 21, standardScore: 67, confidenceInterval: [64, 76] },
    { rawScore: 22, standardScore: 68, confidenceInterval: [65, 77] },
    { rawScore: 23, standardScore: 70, confidenceInterval: [66, 78] },
    { rawScore: 24, standardScore: 72, confidenceInterval: [68, 80] },
    { rawScore: 25, standardScore: 74, confidenceInterval: [70, 82] },
    { rawScore: 26, standardScore: 76, confidenceInterval: [72, 84] },
    { rawScore: 27, standardScore: 77, confidenceInterval: [73, 85] },
    { rawScore: 28, standardScore: 79, confidenceInterval: [75, 87] },
    { rawScore: 29, standardScore: 81, confidenceInterval: [77, 89] },
    { rawScore: 30, standardScore: 83, confidenceInterval: [78, 90] },
    { rawScore: 31, standardScore: 85, confidenceInterval: [80, 92] },
    { rawScore: 32, standardScore: 86, confidenceInterval: [81, 93] },
    { rawScore: 33, standardScore: 88, confidenceInterval: [83, 95] },
    { rawScore: 34, standardScore: 90, confidenceInterval: [85, 97] },
    { rawScore: 35, standardScore: 92, confidenceInterval: [87, 99] },
    { rawScore: 36, standardScore: 94, confidenceInterval: [88, 100] },
    { rawScore: 37, standardScore: 95, confidenceInterval: [89, 101] },
    { rawScore: 38, standardScore: 97, confidenceInterval: [91, 103] },
    { rawScore: 39, standardScore: 99, confidenceInterval: [93, 105] },
    { rawScore: 40, standardScore: 101, confidenceInterval: [95, 107] },
    { rawScore: 41, standardScore: 103, confidenceInterval: [97, 109] },
    { rawScore: 42, standardScore: 104, confidenceInterval: [98, 110] },
    { rawScore: 43, standardScore: 106, confidenceInterval: [100, 112] },
    { rawScore: 44, standardScore: 108, confidenceInterval: [101, 113] },
    { rawScore: 45, standardScore: 110, confidenceInterval: [103, 115] },
    { rawScore: 46, standardScore: 111, confidenceInterval: [104, 116] },
    { rawScore: 47, standardScore: 113, confidenceInterval: [106, 118] },
    { rawScore: 48, standardScore: 115, confidenceInterval: [108, 120] },
    { rawScore: 49, standardScore: 117, confidenceInterval: [110, 122] },
    { rawScore: 50, standardScore: 119, confidenceInterval: [111, 123] },
    { rawScore: 51, standardScore: 120, confidenceInterval: [112, 124] },
    { rawScore: 52, standardScore: 122, confidenceInterval: [114, 126] },
    { rawScore: 53, standardScore: 125, confidenceInterval: [117, 129] },
    { rawScore: 54, standardScore: 128, confidenceInterval: [120, 132] },
    { rawScore: 55, standardScore: 131, confidenceInterval: [123, 135] },
    { rawScore: 56, standardScore: 133, confidenceInterval: [124, 136] },
    { rawScore: 57, standardScore: 137, confidenceInterval: [128, 140] },
    { rawScore: 58, standardScore: 140, confidenceInterval: [131, 143] },
    { rawScore: 59, standardScore: 143, confidenceInterval: [134, 146] },
    { rawScore: 60, standardScore: 147, confidenceInterval: [137, 149] },
  ],
  '30-39': [
    { rawScore: 0, standardScore: 30, confidenceInterval: [28, 42] },
    { rawScore: 1, standardScore: 32, confidenceInterval: [30, 43] },
    { rawScore: 2, standardScore: 34, confidenceInterval: [32, 45] },
    { rawScore: 3, standardScore: 36, confidenceInterval: [34, 47] },
    { rawScore: 4, standardScore: 37, confidenceInterval: [35, 48] },
    { rawScore: 5, standardScore: 39, confidenceInterval: [37, 50] },
    { rawScore: 6, standardScore: 41, confidenceInterval: [39, 52] },
    { rawScore: 7, standardScore: 43, confidenceInterval: [41, 54] },
    { rawScore: 8, standardScore: 44, confidenceInterval: [42, 55] },
    { rawScore: 9, standardScore: 46, confidenceInterval: [44, 56] },
    { rawScore: 10, standardScore: 48, confidenceInterval: [46, 58] },
    { rawScore: 11, standardScore: 50, confidenceInterval: [48, 60] },
    { rawScore: 12, standardScore: 52, confidenceInterval: [50, 62] },
    { rawScore: 13, standardScore: 53, confidenceInterval: [51, 63] },
    { rawScore: 14, standardScore: 55, confidenceInterval: [53, 65] },
    { rawScore: 15, standardScore: 57, confidenceInterval: [54, 66] },
    { rawScore: 16, standardScore: 59, confidenceInterval: [56, 68] },
    { rawScore: 17, standardScore: 61, confidenceInterval: [58, 70] },
    { rawScore: 18, standardScore: 62, confidenceInterval: [59, 71] },
    { rawScore: 19, standardScore: 64, confidenceInterval: [61, 73] },
    { rawScore: 20, standardScore: 66, confidenceInterval: [62, 73] },
    { rawScore: 21, standardScore: 68, confidenceInterval: [64, 75] },
    { rawScore: 22, standardScore: 70, confidenceInterval: [66, 77] },
    { rawScore: 23, standardScore: 71, confidenceInterval: [68, 79] },
    { rawScore: 24, standardScore: 73, confidenceInterval: [70, 81] },
    { rawScore: 25, standardScore: 75, confidenceInterval: [71, 83] },
    { rawScore: 26, standardScore: 77, confidenceInterval: [73, 85] },
    { rawScore: 27, standardScore: 78, confidenceInterval: [74, 86] },
    { rawScore: 28, standardScore: 80, confidenceInterval: [76, 88] },
    { rawScore: 29, standardScore: 82, confidenceInterval: [77, 89] },
    { rawScore: 30, standardScore: 84, confidenceInterval: [79, 91] },
    { rawScore: 31, standardScore: 86, confidenceInterval: [81, 93] },
    { rawScore: 32, standardScore: 87, confidenceInterval: [82, 94] },
    { rawScore: 33, standardScore: 89, confidenceInterval: [84, 96] },
    { rawScore: 34, standardScore: 91, confidenceInterval: [86, 98] },
    { rawScore: 35, standardScore: 93, confidenceInterval: [89, 101] },
    { rawScore: 36, standardScore: 95, confidenceInterval: [90, 102] },
    { rawScore: 37, standardScore: 96, confidenceInterval: [92, 104] },
    { rawScore: 38, standardScore: 98, confidenceInterval: [94, 106] },
    { rawScore: 39, standardScore: 100, confidenceInterval: [96, 108] },
    { rawScore: 40, standardScore: 102, confidenceInterval: [98, 110] },
    { rawScore: 41, standardScore: 104, confidenceInterval: [99, 111] },
    { rawScore: 42, standardScore: 105, confidenceInterval: [100, 112] },
    { rawScore: 43, standardScore: 107, confidenceInterval: [102, 114] },
    { rawScore: 44, standardScore: 109, confidenceInterval: [104, 116] },
    { rawScore: 45, standardScore: 111, confidenceInterval: [105, 117] },
    { rawScore: 46, standardScore: 112, confidenceInterval: [107, 119] },
    { rawScore: 47, standardScore: 114, confidenceInterval: [109, 121] },
    { rawScore: 48, standardScore: 116, confidenceInterval: [111, 123] },
    { rawScore: 49, standardScore: 118, confidenceInterval: [112, 124] },
    { rawScore: 50, standardScore: 120, confidenceInterval: [113, 125] },
    { rawScore: 51, standardScore: 121, confidenceInterval: [116, 128] },
    { rawScore: 52, standardScore: 124, confidenceInterval: [119, 131] },
    { rawScore: 53, standardScore: 127, confidenceInterval: [122, 134] },
    { rawScore: 54, standardScore: 130, confidenceInterval: [124, 136] },
    { rawScore: 55, standardScore: 133, confidenceInterval: [127, 139] },
    { rawScore: 56, standardScore: 136, confidenceInterval: [130, 142] },
    { rawScore: 57, standardScore: 139, confidenceInterval: [133, 145] },
    { rawScore: 58, standardScore: 142, confidenceInterval: [135, 147] },
    { rawScore: 59, standardScore: 145, confidenceInterval: [138, 150] },
    { rawScore: 60, standardScore: 148, confidenceInterval: [138, 150] },
  ],
  '40-49': [
    { rawScore: 0, standardScore: 31, confidenceInterval: [29, 43] },
    { rawScore: 1, standardScore: 33, confidenceInterval: [31, 44] },
    { rawScore: 2, standardScore: 35, confidenceInterval: [33, 46] },
    { rawScore: 3, standardScore: 37, confidenceInterval: [35, 48] },
    { rawScore: 4, standardScore: 39, confidenceInterval: [37, 50] },
    { rawScore: 5, standardScore: 40, confidenceInterval: [38, 51] },
    { rawScore: 6, standardScore: 42, confidenceInterval: [40, 53] },
    { rawScore: 7, standardScore: 44, confidenceInterval: [42, 54] },
    { rawScore: 8, standardScore: 46, confidenceInterval: [44, 56] },
    { rawScore: 9, standardScore: 48, confidenceInterval: [46, 58] },
    { rawScore: 10, standardScore: 49, confidenceInterval: [47, 69] },
    { rawScore: 11, standardScore: 51, confidenceInterval: [49, 61] },
    { rawScore: 12, standardScore: 53, confidenceInterval: [51, 63] },
    { rawScore: 13, standardScore: 55, confidenceInterval: [53, 65] },
    { rawScore: 14, standardScore: 57, confidenceInterval: [54, 66] },
    { rawScore: 15, standardScore: 58, confidenceInterval: [55, 66] },
    { rawScore: 16, standardScore: 60, confidenceInterval: [57, 69] },
    { rawScore: 17, standardScore: 62, confidenceInterval: [59, 71] },
    { rawScore: 18, standardScore: 64, confidenceInterval: [61, 73] },
    { rawScore: 19, standardScore: 65, confidenceInterval: [62, 74] },
    { rawScore: 20, standardScore: 67, confidenceInterval: [64, 76] },
    { rawScore: 21, standardScore: 69, confidenceInterval: [65, 77] },
    { rawScore: 22, standardScore: 71, confidenceInterval: [67, 79] },
    { rawScore: 23, standardScore: 73, confidenceInterval: [69, 81] },
    { rawScore: 24, standardScore: 74, confidenceInterval: [70, 82] },
    { rawScore: 25, standardScore: 76, confidenceInterval: [72, 84] },
    { rawScore: 26, standardScore: 78, confidenceInterval: [74, 86] },
    { rawScore: 27, standardScore: 80, confidenceInterval: [76, 88] },
    { rawScore: 28, standardScore: 82, confidenceInterval: [77, 89] },
    { rawScore: 29, standardScore: 83, confidenceInterval: [78, 90] },
    { rawScore: 30, standardScore: 85, confidenceInterval: [80, 92] },
    { rawScore: 31, standardScore: 87, confidenceInterval: [82, 94] },
    { rawScore: 32, standardScore: 89, confidenceInterval: [84, 96] },
    { rawScore: 33, standardScore: 91, confidenceInterval: [86, 98] },
    { rawScore: 34, standardScore: 92, confidenceInterval: [87, 99] },
    { rawScore: 35, standardScore: 94, confidenceInterval: [88, 100] },
    { rawScore: 36, standardScore: 96, confidenceInterval: [90, 102] },
    { rawScore: 37, standardScore: 98, confidenceInterval: [92, 104] },
    { rawScore: 38, standardScore: 100, confidenceInterval: [94, 106] },
    { rawScore: 39, standardScore: 101, confidenceInterval: [95, 107] },
    { rawScore: 40, standardScore: 103, confidenceInterval: [97, 109] },
    { rawScore: 41, standardScore: 105, confidenceInterval: [99, 111] },
    { rawScore: 42, standardScore: 107, confidenceInterval: [100, 112] },
    { rawScore: 43, standardScore: 108, confidenceInterval: [101, 113] },
    { rawScore: 44, standardScore: 110, confidenceInterval: [103, 115] },
    { rawScore: 45, standardScore: 112, confidenceInterval: [105, 117] },
    { rawScore: 46, standardScore: 114, confidenceInterval: [107, 119] },
    { rawScore: 47, standardScore: 116, confidenceInterval: [109, 121] },
    { rawScore: 48, standardScore: 117, confidenceInterval: [110, 122] },
    { rawScore: 49, standardScore: 119, confidenceInterval: [111, 123] },
    { rawScore: 50, standardScore: 121, confidenceInterval: [113, 125] },
    { rawScore: 51, standardScore: 124, confidenceInterval: [116, 128] },
    { rawScore: 52, standardScore: 127, confidenceInterval: [119, 131] },
    { rawScore: 53, standardScore: 129, confidenceInterval: [121, 133] },
    { rawScore: 54, standardScore: 131, confidenceInterval: [123, 135] },
    { rawScore: 55, standardScore: 135, confidenceInterval: [126, 138] },
    { rawScore: 56, standardScore: 137, confidenceInterval: [128, 140] },
    { rawScore: 57, standardScore: 140, confidenceInterval: [131, 143] },
    { rawScore: 58, standardScore: 143, confidenceInterval: [134, 146] },
    { rawScore: 59, standardScore: 146, confidenceInterval: [136, 148] },
    { rawScore: 60, standardScore: 149, confidenceInterval: [139, 151] },
  ],
  '50-54': [
    { rawScore: 0, standardScore: 33, confidenceInterval: [31, 44] },
    { rawScore: 1, standardScore: 35, confidenceInterval: [33, 46] },
    { rawScore: 2, standardScore: 37, confidenceInterval: [35, 48] },
    { rawScore: 3, standardScore: 38, confidenceInterval: [36, 49] },
    { rawScore: 4, standardScore: 40, confidenceInterval: [38, 51] },
    { rawScore: 5, standardScore: 42, confidenceInterval: [40, 53] },
    { rawScore: 6, standardScore: 44, confidenceInterval: [42, 54] },
    { rawScore: 7, standardScore: 46, confidenceInterval: [44, 56] },
    { rawScore: 8, standardScore: 47, confidenceInterval: [45, 57] },
    { rawScore: 9, standardScore: 49, confidenceInterval: [47, 59] },
    { rawScore: 10, standardScore: 51, confidenceInterval: [49, 61] },
    { rawScore: 11, standardScore: 53, confidenceInterval: [51, 63] },
    { rawScore: 12, standardScore: 55, confidenceInterval: [53, 65] },
    { rawScore: 13, standardScore: 56, confidenceInterval: [54, 66] },
    { rawScore: 14, standardScore: 58, confidenceInterval: [55, 67] },
    { rawScore: 15, standardScore: 60, confidenceInterval: [57, 69] },
    { rawScore: 16, standardScore: 62, confidenceInterval: [59, 71] },
    { rawScore: 17, standardScore: 64, confidenceInterval: [61, 73] },
    { rawScore: 18, standardScore: 65, confidenceInterval: [62, 74] },
    { rawScore: 19, standardScore: 67, confidenceInterval: [64, 76] },
    { rawScore: 20, standardScore: 69, confidenceInterval: [65, 77] },
    { rawScore: 21, standardScore: 71, confidenceInterval: [67, 79] },
    { rawScore: 22, standardScore: 72, confidenceInterval: [68, 80] },
    { rawScore: 23, standardScore: 74, confidenceInterval: [70, 82] },
    { rawScore: 24, standardScore: 76, confidenceInterval: [72, 84] },
    { rawScore: 25, standardScore: 78, confidenceInterval: [74, 86] },
    { rawScore: 26, standardScore: 80, confidenceInterval: [76, 88] },
    { rawScore: 27, standardScore: 81, confidenceInterval: [77, 89] },
    { rawScore: 28, standardScore: 83, confidenceInterval: [78, 90] },
    { rawScore: 29, standardScore: 85, confidenceInterval: [80, 92] },
    { rawScore: 30, standardScore: 87, confidenceInterval: [82, 94] },
    { rawScore: 31, standardScore: 89, confidenceInterval: [84, 96] },
    { rawScore: 32, standardScore: 90, confidenceInterval: [85, 97] },
    { rawScore: 33, standardScore: 92, confidenceInterval: [87, 99] },
    { rawScore: 34, standardScore: 94, confidenceInterval: [88, 100] },
    { rawScore: 35, standardScore: 96, confidenceInterval: [90, 102] },
    { rawScore: 36, standardScore: 98, confidenceInterval: [92, 104] },
    { rawScore: 37, standardScore: 99, confidenceInterval: [93, 105] },
    { rawScore: 38, standardScore: 101, confidenceInterval: [95, 107] },
    { rawScore: 39, standardScore: 103, confidenceInterval: [97, 109] },
    { rawScore: 40, standardScore: 105, confidenceInterval: [99, 111] },
    { rawScore: 41, standardScore: 106, confidenceInterval: [100, 112] },
    { rawScore: 42, standardScore: 108, confidenceInterval: [101, 113] },
    { rawScore: 43, standardScore: 110, confidenceInterval: [103, 115] },
    { rawScore: 44, standardScore: 112, confidenceInterval: [105, 117] },
    { rawScore: 45, standardScore: 114, confidenceInterval: [107, 119] },
    { rawScore: 46, standardScore: 115, confidenceInterval: [108, 120] },
    { rawScore: 47, standardScore: 117, confidenceInterval: [110, 122] },
    { rawScore: 48, standardScore: 119, confidenceInterval: [111, 123] },
    { rawScore: 49, standardScore: 121, confidenceInterval: [113, 125] },
    { rawScore: 50, standardScore: 124, confidenceInterval: [116, 128] },
    { rawScore: 51, standardScore: 126, confidenceInterval: [118, 130] },
    { rawScore: 52, standardScore: 129, confidenceInterval: [121, 133] },
    { rawScore: 53, standardScore: 132, confidenceInterval: [123, 135] },
    { rawScore: 54, standardScore: 135, confidenceInterval: [126, 138] },
    { rawScore: 55, standardScore: 137, confidenceInterval: [128, 140] },
    { rawScore: 56, standardScore: 140, confidenceInterval: [131, 143] },
    { rawScore: 57, standardScore: 142, confidenceInterval: [133, 145] },
    { rawScore: 58, standardScore: 145, confidenceInterval: [135, 147] },
    { rawScore: 59, standardScore: 148, confidenceInterval: [138, 150] },
    { rawScore: 60, standardScore: 151, confidenceInterval: [141, 153] },
  ],
  '55-59': [
    { rawScore: 0, standardScore: 35, confidenceInterval: [33, 46] },
    { rawScore: 1, standardScore: 37, confidenceInterval: [35, 48] },
    { rawScore: 2, standardScore: 39, confidenceInterval: [37, 50] },
    { rawScore: 3, standardScore: 40, confidenceInterval: [38, 51] },
    { rawScore: 4, standardScore: 42, confidenceInterval: [40, 53] },
    { rawScore: 5, standardScore: 44, confidenceInterval: [42, 54] },
    { rawScore: 6, standardScore: 46, confidenceInterval: [44, 56] },
    { rawScore: 7, standardScore: 48, confidenceInterval: [46, 58] },
    { rawScore: 8, standardScore: 49, confidenceInterval: [47, 59] },
    { rawScore: 9, standardScore: 51, confidenceInterval: [49, 61] },
    { rawScore: 10, standardScore: 53, confidenceInterval: [51, 63] },
    { rawScore: 11, standardScore: 55, confidenceInterval: [53, 65] },
    { rawScore: 12, standardScore: 56, confidenceInterval: [54, 66] },
    { rawScore: 13, standardScore: 58, confidenceInterval: [55, 67] },
    { rawScore: 14, standardScore: 60, confidenceInterval: [59, 71] },
    { rawScore: 15, standardScore: 62, confidenceInterval: [61, 73] },
    { rawScore: 16, standardScore: 64, confidenceInterval: [62, 74] },
    { rawScore: 17, standardScore: 65, confidenceInterval: [64, 76] },
    { rawScore: 18, standardScore: 67, confidenceInterval: [65, 77] },
    { rawScore: 19, standardScore: 69, confidenceInterval: [67, 79] },
    { rawScore: 20, standardScore: 71, confidenceInterval: [69, 81] },
    { rawScore: 21, standardScore: 73, confidenceInterval: [70, 82] },
    { rawScore: 22, standardScore: 74, confidenceInterval: [72, 84] },
    { rawScore: 23, standardScore: 76, confidenceInterval: [74, 86] },
    { rawScore: 24, standardScore: 78, confidenceInterval: [76, 88] },
    { rawScore: 25, standardScore: 80, confidenceInterval: [77, 89] },
    { rawScore: 26, standardScore: 82, confidenceInterval: [78, 90] },
    { rawScore: 27, standardScore: 83, confidenceInterval: [80, 92] },
    { rawScore: 28, standardScore: 85, confidenceInterval: [82, 94] },
    { rawScore: 29, standardScore: 87, confidenceInterval: [84, 96] },
    { rawScore: 30, standardScore: 89, confidenceInterval: [86, 98] },
    { rawScore: 31, standardScore: 91, confidenceInterval: [87, 99] },
    { rawScore: 32, standardScore: 92, confidenceInterval: [88, 100] },
    { rawScore: 33, standardScore: 94, confidenceInterval: [90, 102] },
    { rawScore: 34, standardScore: 96, confidenceInterval: [92, 104] },
    { rawScore: 35, standardScore: 98, confidenceInterval: [93, 105] },
    { rawScore: 36, standardScore: 99, confidenceInterval: [95, 107] },
    { rawScore: 37, standardScore: 101, confidenceInterval: [97, 109] },
    { rawScore: 38, standardScore: 103, confidenceInterval: [99, 111] },
    { rawScore: 39, standardScore: 105, confidenceInterval: [100, 112] },
    { rawScore: 40, standardScore: 107, confidenceInterval: [101, 113] },
    { rawScore: 41, standardScore: 108, confidenceInterval: [103, 115] },
    { rawScore: 42, standardScore: 110, confidenceInterval: [105, 117] },
    { rawScore: 43, standardScore: 112, confidenceInterval: [107, 119] },
    { rawScore: 44, standardScore: 114, confidenceInterval: [109, 121] },
    { rawScore: 45, standardScore: 116, confidenceInterval: [110, 122] },
    { rawScore: 46, standardScore: 117, confidenceInterval: [111, 123] },
    { rawScore: 47, standardScore: 119, confidenceInterval: [113, 125] },
    { rawScore: 48, standardScore: 121, confidenceInterval: [116, 128] },
    { rawScore: 49, standardScore: 124, confidenceInterval: [118, 130] },
    { rawScore: 50, standardScore: 126, confidenceInterval: [121, 133] },
    { rawScore: 51, standardScore: 129, confidenceInterval: [123, 135] },
    { rawScore: 52, standardScore: 131, confidenceInterval: [125, 137] },
    { rawScore: 53, standardScore: 134, confidenceInterval: [127, 139] },
    { rawScore: 54, standardScore: 136, confidenceInterval: [127, 139] },
    { rawScore: 55, standardScore: 139, confidenceInterval: [130, 142] },
    { rawScore: 56, standardScore: 141, confidenceInterval: [132, 144] },
    { rawScore: 57, standardScore: 144, confidenceInterval: [134, 146] },
    { rawScore: 58, standardScore: 146, confidenceInterval: [136, 148] },
    { rawScore: 59, standardScore: 149, confidenceInterval: [139, 151] },
    { rawScore: 60, standardScore: 152, confidenceInterval: [142, 154] },
  ],
  '60-64': [
    { rawScore: 0, standardScore: 37, confidenceInterval: [35, 47] },
    { rawScore: 1, standardScore: 39, confidenceInterval: [37, 49] },
    { rawScore: 2, standardScore: 41, confidenceInterval: [39, 51] },
    { rawScore: 3, standardScore: 43, confidenceInterval: [41, 53] },
    { rawScore: 4, standardScore: 44, confidenceInterval: [42, 54] },
    { rawScore: 5, standardScore: 46, confidenceInterval: [44, 56] },
    { rawScore: 6, standardScore: 48, confidenceInterval: [46, 58] },
    { rawScore: 7, standardScore: 50, confidenceInterval: [48, 60] },
    { rawScore: 8, standardScore: 52, confidenceInterval: [49, 61] },
    { rawScore: 9, standardScore: 53, confidenceInterval: [50, 62] },
    { rawScore: 10, standardScore: 55, confidenceInterval: [52, 64] },
    { rawScore: 11, standardScore: 57, confidenceInterval: [54, 66] },
    { rawScore: 12, standardScore: 59, confidenceInterval: [56, 68] },
    { rawScore: 13, standardScore: 60, confidenceInterval: [57, 69] },
    { rawScore: 14, standardScore: 62, confidenceInterval: [59, 71] },
    { rawScore: 15, standardScore: 64, confidenceInterval: [61, 73] },
    { rawScore: 16, standardScore: 66, confidenceInterval: [62, 74] },
    { rawScore: 17, standardScore: 68, confidenceInterval: [64, 76] },
    { rawScore: 18, standardScore: 69, confidenceInterval: [65, 77] },
    { rawScore: 19, standardScore: 71, confidenceInterval: [67, 79] },
    { rawScore: 20, standardScore: 73, confidenceInterval: [69, 81] },
    { rawScore: 21, standardScore: 75, confidenceInterval: [71, 83] },
    { rawScore: 22, standardScore: 77, confidenceInterval: [73, 85] },
    { rawScore: 23, standardScore: 78, confidenceInterval: [74, 86] },
    { rawScore: 24, standardScore: 80, confidenceInterval: [75, 87] },
    { rawScore: 25, standardScore: 82, confidenceInterval: [77, 89] },
    { rawScore: 26, standardScore: 84, confidenceInterval: [79, 91] },
    { rawScore: 27, standardScore: 86, confidenceInterval: [81, 93] },
    { rawScore: 28, standardScore: 87, confidenceInterval: [82, 94] },
    { rawScore: 29, standardScore: 89, confidenceInterval: [84, 96] },
    { rawScore: 30, standardScore: 91, confidenceInterval: [86, 98] },
    { rawScore: 31, standardScore: 93, confidenceInterval: [87, 99] },
    { rawScore: 32, standardScore: 94, confidenceInterval: [88, 100] },
    { rawScore: 33, standardScore: 96, confidenceInterval: [90, 102] },
    { rawScore: 34, standardScore: 98, confidenceInterval: [92, 104] },
    { rawScore: 35, standardScore: 100, confidenceInterval: [94, 106] },
    { rawScore: 36, standardScore: 102, confidenceInterval: [96, 108] },
    { rawScore: 37, standardScore: 103, confidenceInterval: [97, 109] },
    { rawScore: 38, standardScore: 105, confidenceInterval: [99, 111] },
    { rawScore: 39, standardScore: 107, confidenceInterval: [101, 113] },
    { rawScore: 40, standardScore: 109, confidenceInterval: [102, 114] },
    { rawScore: 41, standardScore: 111, confidenceInterval: [104, 116] },
    { rawScore: 42, standardScore: 112, confidenceInterval: [105, 117] },
    { rawScore: 43, standardScore: 114, confidenceInterval: [107, 119] },
    { rawScore: 44, standardScore: 116, confidenceInterval: [109, 121] },
    { rawScore: 45, standardScore: 118, confidenceInterval: [111, 123] },
    { rawScore: 46, standardScore: 120, confidenceInterval: [113, 125] },
    { rawScore: 47, standardScore: 121, confidenceInterval: [114, 126] },
    { rawScore: 48, standardScore: 123, confidenceInterval: [115, 127] },
    { rawScore: 49, standardScore: 126, confidenceInterval: [118, 130] },
    { rawScore: 50, standardScore: 128, confidenceInterval: [120, 132] },
    { rawScore: 51, standardScore: 131, confidenceInterval: [123, 135] },
    { rawScore: 52, standardScore: 133, confidenceInterval: [125, 137] },
    { rawScore: 53, standardScore: 137, confidenceInterval: [128, 140] },
    { rawScore: 54, standardScore: 139, confidenceInterval: [130, 142] },
    { rawScore: 55, standardScore: 142, confidenceInterval: [133, 145] },
    { rawScore: 56, standardScore: 144, confidenceInterval: [135, 147] },
    { rawScore: 57, standardScore: 147, confidenceInterval: [138, 150] },
    { rawScore: 58, standardScore: 150, confidenceInterval: [141, 153] },
    { rawScore: 59, standardScore: 152, confidenceInterval: [142, 154] },
    { rawScore: 60, standardScore: 155, confidenceInterval: [145, 157] },
  ],
}

function getTograResult(ageGroup: AgeGroup, rawScore: number): TograRow | null {
  const table = TOGRA_TABLES[ageGroup]
  return table.find((row) => row.rawScore === rawScore) || null
}

function getAgeGroup(age: number): AgeGroup {
  if (age >= 21 && age <= 29) return '21-29'
  if (age >= 30 && age <= 39) return '30-39'
  if (age >= 40 && age <= 49) return '40-49'
  if (age >= 50 && age <= 54) return '50-54'
  if (age >= 55 && age <= 59) return '55-59'
  if (age >= 60 && age <= 64) return '60-64'
  return '60-64'
}

const totalAttemptedQuestions = (data: any): number => {
  return Object.values(data).filter(
    (value) =>
      value !== '' && value !== null && value !== undefined && value !== '0',
  ).length
}

export {
  calculateTotalScore,
  getTograResult,
  getAgeGroup,
  totalAttemptedQuestions,
}
